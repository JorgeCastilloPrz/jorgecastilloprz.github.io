<!DOCTYPE html>
<html>
<head>
    
    <link rel="stylesheet" type="text/css" href="/assets/built/style.css" />

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Jetpack Compose ConstraintLayout</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Fira+Code:500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Work+Sans&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->

    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="You'll find all my tech posts here." />
    <link rel="shortcut icon" href="https://jorgecastilloprz.github.io/assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="üë®‚Äçüíª Jorge Castillo" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Jetpack Compose ConstraintLayout" />
    <meta property="og:description" content="Learn how to work with ConstraintLayout in Compose. Everything listed in this post is part of Jetpack Compose version 0.1.0-dev13, (Compose Developer Preview 2), so it‚Äôs quite prone to change over time while the team keeps improving the api surface. üß† Concern separation When ConstraintLayout was coded for the Android" />
    <meta property="og:url" content="https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout" />
    <meta property="og:image" content="https://jorgecastilloprz.github.io/assets/images/yak.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2020-05-17T11:00:00+00:00" />
    <meta property="article:modified_time" content="2020-05-17T11:00:00+00:00" />
    <meta property="article:tag" content="Android" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Jetpack Compose ConstraintLayout" />
    <meta name="twitter:description" content="Learn how to work with ConstraintLayout in Compose. Everything listed in this post is part of Jetpack Compose version 0.1.0-dev13, (Compose Developer Preview 2), so it‚Äôs quite prone to change over time while the team keeps improving the api surface. üß† Concern separation When ConstraintLayout was coded for the Android" />
    <meta name="twitter:url" content="https://jorgecastilloprz.github.io/" />
    <meta name="twitter:image" content="https://jorgecastilloprz.github.io/assets/images/yak.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="üë®‚Äçüíª Jorge Castillo" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Android" />
    <meta name="twitter:site" content="@jorgecastillopr" />
    <meta name="twitter:creator" content="@jorgecastillopr" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "üë®‚Äçüíª Jorge Castillo",
        "logo": "https://jorgecastilloprz.github.io/"
    },
    "url": "https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout",
    "image": {
        "@type": "ImageObject",
        "url": "https://jorgecastilloprz.github.io/assets/images/yak.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout"
    },
    "description": "Learn how to work with ConstraintLayout in Compose. Everything listed in this post is part of Jetpack Compose version 0.1.0-dev13, (Compose Developer Preview 2), so it‚Äôs quite prone to change over time while the team keeps improving the api surface. üß† Concern separation When ConstraintLayout was coded for the Android"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Jetpack Compose ConstraintLayout" href="/feed.xml" />

    <style>
        .highlighter-rouge, .highlight, code {
            width: 100%;
        }
    </style>


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://jorgecastilloprz.github.io/">üë®‚Äçüíª Jorge Castillo</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-animations" role="menuitem" style="margin-left: 14px;"><a class="colorWhite" href="/course/">Course üé¨</a></li>
    <li class="nav-androidcourse" style="margin-left: 10px; margin-right: 10px;" role="menuitem"><a class="colorOnHighlight" href="/book/">Book üìñ Jetpack Compose internals üî•</a></li>
    <li class="nav-about" role="menuitem"><a class="menuLink" href="/about/">About</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-tw" href="https://twitter.com/jorgecastillopr" target="_blank" rel="noopener"><img width=26 src="../assets/images/twitter.svg"/></a>
            
            
                <a class="social-link social-link-tw" href="https://androiddev.social/@jorge" target="_blank" rel="noopener"><img width=26 src="../assets/images/mastodon.svg"/></a>
            
        </div>
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post ">

            <header class="post-full-header">
              <section class="post-full-meta">
                  <time class="post-full-meta-date" datetime="17 May 2020">17 May 2020</time>
              </section>

              
                  
                      <span class="post-card-tags"><a style="color:white;" href='/tag/android/'>Android</a></span>
                  
                      <span class="post-card-tags"><a style="color:white;" href='/tag/compose/'>Compose</a></span>
                  
              

                <h1 class="post-full-title">Jetpack Compose ConstraintLayout</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/yak.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>Learn how to work with ConstraintLayout in Compose.</p>

<blockquote>
  <p>Everything listed in this post is part of Jetpack Compose version <code class="language-plaintext highlighter-rouge">0.1.0-dev13</code>, (Compose Developer Preview 2), so it‚Äôs quite prone to change over time while the team keeps improving the api surface.</p>
</blockquote>

<h3 id="-concern-separation">üß† Concern separation</h3>

<p>When <code class="language-plaintext highlighter-rouge">ConstraintLayout</code> was coded for the Android View system, logics for rendering (constraints) were decoupled from the <code class="language-plaintext highlighter-rouge">ViewGroup</code> with the purpose of making it also work for the layout editor. That decision turned out to be pretty convenient so it could also be ported into Jetpack Compose now.</p>

<h3 id="Ô∏è-how-to-use-it">ü§∑üèº‚Äç‚ôÄÔ∏è How to use it</h3>

<p>You can find it in <code class="language-plaintext highlighter-rouge">implementation 'androidx.ui:ui-layout:0.1.0-dev13'</code> and import it like <code class="language-plaintext highlighter-rouge">import androidx.ui.layout.ConstraintLayout</code>.</p>

<p><a href="https://github.com/JorgeCastilloPrz/ComposeConstraintLayoutSamples">Here</a> you have a fully working example I prepared and I‚Äôll be iterating over in other articles to come.</p>

<h3 id="-an-example">üëÄ An example</h3>

<p>There is <a href="https://github.com/riggaroo/ConstraintLayoutDemo">an awesome sample project</a> on <code class="language-plaintext highlighter-rouge">ConstraintLayout</code> created by <a href="https://twitter.com/riggaroo">@riggaroo</a> that showcases how to build a Google Play Movies detail like layout for the Android View System. In this post I‚Äôll do a try to replicate it for Jetpack Compose as possible. Here is the final result:</p>

<table>
	<tr>
	  <th><img style="display: table;" src="/assets/images/aladdin.png" alt="Aladdin sample" width="300px" />
	  </th>
	  <th><img style="display: table;" src="/assets/images/aladdin.gif" alt="Aladdin gif" width="300px" />
	  </th>
	</tr>
</table>

<p>The only goal is to showcase how to use <code class="language-plaintext highlighter-rouge">ConstraintLayout</code> composable by yourself, so don‚Äôt expect much magic on this first post but mostly the basics.</p>

<p>For loading images from a remote URL seamlessly I‚Äôll be using Coil via the <a href="https://twitter.com/chrisbanes/status/1261279161735208960">Accompanist</a> library, by <a href="https://twitter.com/chrisbanes">@chrisbanes</a>. This library provides some utilities for projects in the process of migration to Jetpack Compose, like a theme builder to load theme colors from the closest <code class="language-plaintext highlighter-rouge">Context</code>, so you can keep using your XML themes and styles while doing the migration. Pretty interesting in my opinion.</p>

<p>Let‚Äôs start by coding those rounded icon buttons on the image.</p>

<p>I decided to code those as a separate component for reusability. The component has an icon and a text inside. The name is <code class="language-plaintext highlighter-rouge">RoundedIconButton</code>, which gets a series of arguments: The <code class="language-plaintext highlighter-rouge">tag</code>, that will be used to reference composables within our layout declaration and that we‚Äôll look into later, the image vector asset, a text to put below it and an optional background color.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">RoundedIconButton</span><span class="p">(</span>
    <span class="n">tag</span><span class="p">:</span> <span class="nc">Tag</span><span class="p">,</span>
    <span class="n">asset</span><span class="p">:</span> <span class="nc">VectorAsset</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span>
    <span class="n">background</span><span class="p">:</span> <span class="nc">Color</span> <span class="p">=</span> <span class="n">lightThemeColors</span><span class="p">.</span><span class="n">primary</span>
<span class="p">)</span> <span class="p">{</span>
    <span class="nc">Column</span><span class="p">(</span>
        <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="p">+</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">16</span><span class="p">.</span><span class="n">dp</span><span class="p">),</span>
        <span class="n">horizontalGravity</span> <span class="p">=</span> <span class="nc">Alignment</span><span class="p">.</span><span class="nc">CenterHorizontally</span>
    <span class="p">)</span> <span class="p">{</span>
        <span class="nc">Image</span><span class="p">(</span>
            <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">drawBackground</span><span class="p">(</span>
                <span class="n">background</span><span class="p">,</span>
                <span class="nc">CircleShape</span>
            <span class="p">)</span> <span class="p">+</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">20</span><span class="p">.</span><span class="n">dp</span><span class="p">),</span>
            <span class="n">asset</span> <span class="p">=</span> <span class="n">asset</span>
        <span class="p">)</span>
        <span class="nc">Text</span><span class="p">(</span>
            <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="n">top</span> <span class="p">=</span> <span class="mi">8</span><span class="p">.</span><span class="n">dp</span><span class="p">),</span>
            <span class="n">style</span> <span class="p">=</span> <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">typography</span><span class="p">.</span><span class="n">body2</span><span class="p">,</span>
            <span class="n">color</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">.</span><span class="nc">Gray</span><span class="p">,</span>
            <span class="n">text</span> <span class="p">=</span> <span class="n">text</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>By adding a <code class="language-plaintext highlighter-rouge">Column</code> I align the image and the text below it vertically, Then I impose center horizontal aligment for both things inside the <code class="language-plaintext highlighter-rouge">Column</code> with a modifier.</p>

<p>From the outside, we‚Äôll be able to call it like:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">RoundedIconButton</span><span class="p">(</span>
    <span class="n">tag</span> <span class="p">=</span> <span class="nc">FamilyCircleTag</span><span class="p">,</span>
    <span class="n">asset</span> <span class="p">=</span> <span class="nf">vectorResource</span><span class="p">(</span><span class="nc">R</span><span class="p">.</span><span class="n">drawable</span><span class="p">.</span><span class="n">ic_family</span><span class="p">),</span>
    <span class="n">text</span> <span class="p">=</span> <span class="s">"Family"</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">FamilyCircleTag</code> is a simple: <code class="language-plaintext highlighter-rouge">object FamilyCircleTag</code>. This would be the visual result üëç</p>

<p><img src="/assets/images/RoundedIconButton.png" alt="Aladdin gif" width="200px" /></p>

<p>Let‚Äôs move on now into the actual <code class="language-plaintext highlighter-rouge">ConstraintLayout</code> code.</p>

<p>I will provide a new component representing my screen for this. Content will be into a <code class="language-plaintext highlighter-rouge">VerticalScroller</code> since I‚Äôll want it to be scrollable in the vertical direction:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">GooglePlayScreen</span><span class="p">(</span><span class="n">movie</span><span class="p">:</span> <span class="nc">MovieViewState</span><span class="p">)</span> <span class="p">{</span>
  <span class="nc">VerticalScroller</span> <span class="p">{</span>
    <span class="c1">// My screen composable tree will live in here</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>Time to to add our <code class="language-plaintext highlighter-rouge">ConstraintLayout</code> to the mix.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">GooglePlayScreen</span><span class="p">(</span><span class="n">movie</span><span class="p">:</span> <span class="nc">MovieViewState</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">VerticalScroller</span> <span class="p">{</span>
	<span class="nc">ConstraintLayout</span><span class="p">(</span>
	  <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">drawBackground</span><span class="p">(</span><span class="n">color</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">.</span><span class="nc">White</span><span class="p">)</span> <span class="p">+</span>
	  	<span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
	  	<span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxHeight</span><span class="p">(),</span>
	  <span class="n">constraintSet</span> <span class="p">=</span> <span class="nc">ConstraintSet</span> <span class="p">{</span>
	    <span class="c1">// We'll add our initial constraints here!</span>
	  <span class="p">})</span> <span class="p">{</span>
	    <span class="c1">// Our composables will be the composable children declared here.</span>
	    <span class="c1">// They will be constrained by the constraints provided above.</span>
	  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>I‚Äôm imposing full width and height by modifiers, since I want this composable to take the whole screen.</p>

<p>Since Jetpack Compose composables don‚Äôt rely on ids for reference like in the <code class="language-plaintext highlighter-rouge">View</code> system, we need to create <code class="language-plaintext highlighter-rouge">tags</code> to refer to those within our constraints.</p>

<p>Let‚Äôs create a tag for our header image, and add some constraints to it:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="kd">object</span> <span class="nc">HeaderImageTag</span>

<span class="nd">@Composable</span>
<span class="k">fun</span> <span class="nf">GooglePlayScreen</span><span class="p">(</span><span class="n">movie</span><span class="p">:</span> <span class="nc">MovieViewState</span><span class="p">)</span> <span class="p">{</span>
    <span class="nc">VerticalScroller</span> <span class="p">{</span>
	<span class="nc">ConstraintLayout</span><span class="p">(</span>
	  <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">drawBackground</span><span class="p">(</span><span class="n">color</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">.</span><span class="nc">White</span><span class="p">)</span> <span class="p">+</span>
	  	<span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
	  	<span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxHeight</span><span class="p">(),</span>
	  <span class="n">constraintSet</span> <span class="p">=</span> <span class="nc">ConstraintSet</span> <span class="p">{</span>
	    <span class="kd">val</span> <span class="py">headerImage</span> <span class="p">=</span> <span class="nf">tag</span><span class="p">(</span><span class="nc">HeaderImageTag</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
	      <span class="n">top</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">top</span>
	      <span class="n">left</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">left</span>
	      <span class="n">right</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">right</span>
	    <span class="p">}</span>
	  <span class="p">})</span> <span class="p">{</span>
	    <span class="nc">CoilImage</span><span class="p">(</span>
                <span class="n">data</span> <span class="p">=</span> <span class="n">movie</span><span class="p">.</span><span class="n">headerImageUrl</span><span class="p">,</span>
                <span class="n">contentScale</span> <span class="p">=</span> <span class="nc">ContentScale</span><span class="p">.</span><span class="nc">Crop</span><span class="p">,</span>
                <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
                  <span class="nc">Modifier</span><span class="p">.</span><span class="nf">preferredHeight</span><span class="p">(</span><span class="mi">240</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
                  <span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="nc">HeaderImageTag</span><span class="p">)</span>
            <span class="p">)</span>
	  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that we just need add the composable as a children of our <code class="language-plaintext highlighter-rouge">ConstraintLayout</code>, like I‚Äôm doing with my <code class="language-plaintext highlighter-rouge">CoilImage</code>. Remember to
<strong>tag the view with the the same tag used for its constraints</strong> ‚ö†Ô∏è, using a tag modifier.</p>

<p>You can see how simple is it to constrain our views:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">headerImage</span><span class="p">.</span><span class="n">top</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">top</span>
<span class="n">headerImage</span><span class="p">.</span><span class="n">left</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">left</span>
<span class="n">headerImage</span><span class="p">.</span><span class="n">right</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">right</span>
</code></pre></div></div>

<p>Now let‚Äôs add our movie cover image as a portrait:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sealed</span> <span class="kd">class</span> <span class="nc">Tag</span>
<span class="k">private</span> <span class="kd">object</span> <span class="nc">HeaderImageTag</span> <span class="p">:</span> <span class="nc">Tag</span><span class="p">()</span>
<span class="k">private</span> <span class="kd">object</span> <span class="nc">PortraitImageTag</span> <span class="p">:</span> <span class="nc">Tag</span><span class="p">()</span>

<span class="nc">ConstraintLayout</span><span class="p">(</span>
  <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">drawBackground</span><span class="p">(</span><span class="n">color</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">.</span><span class="nc">White</span><span class="p">)</span> <span class="p">+</span>
    <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
    <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxHeight</span><span class="p">(),</span>
  <span class="n">constraintSet</span> <span class="p">=</span> <span class="nc">ConstraintSet</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">headerImage</span> <span class="p">=</span> <span class="nf">tag</span><span class="p">(</span><span class="nc">HeaderImageTag</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
      <span class="n">top</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">top</span>
      <span class="n">left</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">left</span>
      <span class="n">right</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">right</span>
    <span class="p">}</span>
    <span class="kd">val</span> <span class="py">portraitImage</span> <span class="p">=</span> <span class="nf">tag</span><span class="p">(</span><span class="nc">PortraitImageTag</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
      <span class="n">left</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">left</span>
      <span class="n">top</span> <span class="n">constrainTo</span> <span class="n">headerImage</span><span class="p">.</span><span class="n">bottom</span>
      <span class="n">bottom</span> <span class="n">constrainTo</span> <span class="n">headerImage</span><span class="p">.</span><span class="n">bottom</span>
    <span class="p">}</span>
<span class="p">})</span> <span class="p">{</span>
  <span class="nc">CoilImage</span><span class="p">(</span>
     <span class="n">data</span> <span class="p">=</span> <span class="n">movie</span><span class="p">.</span><span class="n">headerImageUrl</span><span class="p">,</span>
     <span class="n">contentScale</span> <span class="p">=</span> <span class="nc">ContentScale</span><span class="p">.</span><span class="nc">Crop</span><span class="p">,</span>
     <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
     	  		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">preferredHeight</span><span class="p">(</span><span class="mi">240</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
     	  		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="nc">HeaderImageTag</span><span class="p">))</span>

  <span class="nc">CoilImage</span><span class="p">(</span>
    <span class="n">data</span> <span class="p">=</span> <span class="n">movie</span><span class="p">.</span><span class="n">portraitUrl</span><span class="p">,</span>
    <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">preferredSize</span><span class="p">(</span><span class="mi">120</span><span class="p">.</span><span class="n">dp</span><span class="p">,</span> <span class="mi">260</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
     		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">8</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
     		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="nc">PortraitImageTag</span><span class="p">))</span>
   <span class="p">}</span>
</code></pre></div></div>

<p>We align its top and bottom to the bottom edge of the header image, so that way we center it vertically to that line.</p>

<p>Let‚Äôs add a title now:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">sealed</span> <span class="kd">class</span> <span class="nc">Tag</span>
<span class="k">private</span> <span class="kd">object</span> <span class="nc">HeaderImageTag</span> <span class="p">:</span> <span class="nc">Tag</span><span class="p">()</span>
<span class="k">private</span> <span class="kd">object</span> <span class="nc">PortraitImageTag</span> <span class="p">:</span> <span class="nc">Tag</span><span class="p">()</span>
<span class="k">private</span> <span class="kd">object</span> <span class="nc">TitleTag</span> <span class="p">:</span> <span class="nc">Tag</span><span class="p">()</span>

<span class="nc">ConstraintLayout</span><span class="p">(</span>
  <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">drawBackground</span><span class="p">(</span><span class="n">color</span> <span class="p">=</span> <span class="nc">Color</span><span class="p">.</span><span class="nc">White</span><span class="p">)</span> <span class="p">+</span>
    <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
    <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxHeight</span><span class="p">(),</span>
  <span class="n">constraintSet</span> <span class="p">=</span> <span class="nc">ConstraintSet</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">headerImage</span> <span class="p">=</span> <span class="nf">tag</span><span class="p">(</span><span class="nc">HeaderImageTag</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
      <span class="n">top</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">top</span>
      <span class="n">left</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">left</span>
      <span class="n">right</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">right</span>
    <span class="p">}</span>

    <span class="kd">val</span> <span class="py">portraitImage</span> <span class="p">=</span> <span class="nf">tag</span><span class="p">(</span><span class="nc">PortraitImageTag</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
      <span class="n">left</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">left</span>
      <span class="n">top</span> <span class="n">constrainTo</span> <span class="n">headerImage</span><span class="p">.</span><span class="n">bottom</span>
      <span class="n">bottom</span> <span class="n">constrainTo</span> <span class="n">headerImage</span><span class="p">.</span><span class="n">bottom</span>
    <span class="p">}</span>

    <span class="kd">val</span> <span class="py">title</span> <span class="p">=</span> <span class="nf">tag</span><span class="p">(</span><span class="nc">TitleTag</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
      <span class="n">top</span> <span class="n">constrainTo</span> <span class="n">headerImage</span><span class="p">.</span><span class="n">bottom</span>
      <span class="n">left</span> <span class="n">constrainTo</span> <span class="n">portraitImage</span><span class="p">.</span><span class="n">right</span>
      <span class="n">right</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">right</span>
      <span class="n">width</span> <span class="p">=</span> <span class="n">spread</span>
    <span class="p">}</span>
<span class="p">})</span> <span class="p">{</span>
  <span class="nc">CoilImage</span><span class="p">(</span>
     <span class="n">data</span> <span class="p">=</span> <span class="n">movie</span><span class="p">.</span><span class="n">headerImageUrl</span><span class="p">,</span>
     <span class="n">contentScale</span> <span class="p">=</span> <span class="nc">ContentScale</span><span class="p">.</span><span class="nc">Crop</span><span class="p">,</span>
     <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">fillMaxWidth</span><span class="p">()</span> <span class="p">+</span>
     	  		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">preferredHeight</span><span class="p">(</span><span class="mi">240</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
     	  		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="nc">HeaderImageTag</span><span class="p">))</span>

  <span class="nc">CoilImage</span><span class="p">(</span>
    <span class="n">data</span> <span class="p">=</span> <span class="n">movie</span><span class="p">.</span><span class="n">portraitUrl</span><span class="p">,</span>
    <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">preferredSize</span><span class="p">(</span><span class="mi">120</span><span class="p">.</span><span class="n">dp</span><span class="p">,</span> <span class="mi">260</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
     		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="mi">8</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span>
     		<span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="nc">PortraitImageTag</span><span class="p">))</span>
   <span class="p">}</span>

   <span class="nc">Text</span><span class="p">(</span>
     <span class="n">movie</span><span class="p">.</span><span class="n">name</span><span class="p">,</span>
     <span class="n">style</span> <span class="p">=</span> <span class="nc">MaterialTheme</span><span class="p">.</span><span class="n">typography</span><span class="p">.</span><span class="n">h4</span><span class="p">,</span>
     <span class="n">modifier</span> <span class="p">=</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">padding</span><span class="p">(</span><span class="n">top</span> <span class="p">=</span> <span class="mi">16</span><span class="p">.</span><span class="n">dp</span><span class="p">)</span> <span class="p">+</span> <span class="nc">Modifier</span><span class="p">.</span><span class="nf">tag</span><span class="p">(</span><span class="nc">TitleTag</span><span class="p">))</span>
</code></pre></div></div>

<p>Note how we align the title:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">title</span><span class="p">.</span><span class="n">top</span> <span class="n">constrainTo</span> <span class="n">headerImage</span><span class="p">.</span><span class="n">bottom</span>
<span class="n">title</span><span class="p">.</span><span class="n">left</span> <span class="n">constrainTo</span> <span class="n">portraitImage</span><span class="p">.</span><span class="n">right</span>
<span class="n">title</span><span class="p">.</span><span class="n">right</span> <span class="n">constrainTo</span> <span class="n">parent</span><span class="p">.</span><span class="n">right</span>
<span class="n">title</span><span class="p">.</span><span class="n">width</span> <span class="p">=</span> <span class="n">spread</span>
</code></pre></div></div>

<p>This will make it position below the header image, and to the right of the portrait image.</p>

<p>The <code class="language-plaintext highlighter-rouge">spread</code> width has the same effect than for the <code class="language-plaintext highlighter-rouge">View</code> system <code class="language-plaintext highlighter-rouge">ConstraintLayout</code>; Since our text is smaller than the available width space, we want it to take all the available space instead, so its content (the actual text rendered within the composable) gets aligned to the left per its gravity. Here‚Äôs the visual result with the text background in Red so you can see what I‚Äôm talking about:</p>

<table>
	<tr>
	  <th><img style="display: table;" src="/assets/images/constraint_header1.png" alt="Aladdin sample" width="300px" />
	  </th>
	  <th><img style="display: table;" src="/assets/images/constraint_header2.png" alt="Aladdin gif" width="300px" />
	  </th>
	</tr>
</table>

<p>And by following this pattern you can add the rest of the views. There are not any gotchas in there, so I‚Äôll prompt you to have a look to <a href="https://github.com/JorgeCastilloPrz/ComposeConstraintLayoutSamples/blob/018be546b5283d6d4efe3c35d935e07ef0c234ce/app/src/main/java/dev/jorgecastillo/composeconstraintlayout/movies/GooglePlayScreen.kt#L48">the complete screen code here</a>.</p>

<p>I plan on iterating a bit over this sample to add some interesting animations to the screen in future posts, so stay tunned üëç</p>

<p>Also keep in mind <code class="language-plaintext highlighter-rouge">ConstraintLayout</code> is not being promoted yet by the Jetpack Compose team, precisely because it‚Äôs prone to change, as many other apis. Keep that in mind when you use it üôè</p>

<p><img src="/assets/images/aladdin.png" alt="Aladdin sample" width="300px" /></p>

<hr />

<p>Remember that <strong>you‚Äôll need Android Studio 4.2 Canary 1</strong> to use Jetpack Compose.</p>

<p>You might be interested in other posts I wrote about Jetpack Compose, like:</p>

<ul>
  <li><a href="https://jorgecastillo.dev/jetpack-compose-withconstraints">Jetpack Compose WithConstraints</a></li>
</ul>

<p>I share thoughts and ideas <a href="https://twitter.com/JorgeCastilloPR">on Twitter</a> quite regularly. You can also find me <a href="https://www.instagram.com/jorgecastillopr/">on Instagram</a>. See you there!</p>

<p>Stay tunned for more Jetpack Compose posts üëã</p>

                </div>
            </section>

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/avatar.jpeg" alt="jorge" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/jorge">Jorge Castillo</a></h4>
                                
                                    <p>Android developer, Arrow maintainer, pianist wannabe üéπ</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/jorge">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                  <div id="disqus_thread"></div>
                  <script>

                  /**
                  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

                  var disqus_config = function () {
                      this.page.url = 'https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout';
                      this.page.identifier = 'https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout';
                  };

                  (function() { // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    s.src = 'https://jorgecastilloblog.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                  })();
                  </script>
                  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover-dark.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; üë®‚Äçüíª Jorge Castillo &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/android/">Android</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/composed-modifiers-in-jetpack-compose">Composed modifiers in Jetpack Compose</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/jetpack-compose-withconstraints">Custom Layouts, measuring policies, and BoxWithConstraints in Jetpack Compose</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/jetpack-compose-effect-handlers">Jetpack Compose Effect Handlers</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/android/">
                                
                                    See all 10 posts  ‚Üí
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/jetpack-compose-await-next-frame">
                <div class="post-card-image" style="background-image: url(/assets/images/racoon.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/jetpack-compose-await-next-frame">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Android</span>
                            
                        
                            
                                <span class="post-card-tags">Compose</span>
                            
                        
                    

                    <h2 class="post-card-title">Await next frame in Jetpack Compose</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/avatar.jpeg" alt="Jorge Castillo" />
                        
                        <span class="post-card-author">
                            <a href="/author/jorge/">Jorge Castillo</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/online-courses-tips">
                <div class="post-card-image" style="background-image: url(/assets/images/onlinecourses.jpeg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/online-courses-tips">
                <header class="post-card-header">
                    
                        
                            
                               <span class="post-card-tags">Trainings</span>
                            
                        
                            
                                <span class="post-card-tags">Education</span>
                            
                        
                    

                    <h2 class="post-card-title">Tips for productive online courses</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/avatar.jpeg" alt="Jorge Castillo" />
                        
                        <span class="post-card-author">
                            <a href="/author/jorge/">Jorge Castillo</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://jorgecastilloprz.github.io/">
            
            <span>üë®‚Äçüíª Jorge Castillo</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Jetpack Compose ConstraintLayout</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Jetpack+Compose+ConstraintLayout&amp;url=https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://jorgecastilloprz.github.io/jetpack-compose-constraintlayout"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://jorgecastilloprz.github.io/">üë®‚Äçüíª Jorge Castillo</a> &copy; 2025</section>
                <section class="poweredby">
                    <a rel="me" href="https://androiddev.social/@jorge">Mastodon</a>
                </section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    <a href="https://twitter.com/jorgecastillopr" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-142413286-1', 'auto');
  ga('send', 'pageview');

 </script>

<!-- 100% privacy-first analytics -->
<script async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>


    <script defer data-domain="jorgecastillo.dev" src="https://plausible.io/js/script.js"></script>

    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
